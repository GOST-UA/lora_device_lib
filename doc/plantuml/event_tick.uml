@startuml

Mainloop -> EventManager: tick()

loop each IO event

    EventManager -> EventManager: poll IO event flag
    
    EventManager -> EventManager: calculate delay between event and now

    EventManager -> Mac: handler(delay)
    
    activate Mac
    EventManager <[#blue]-- Mac
    deactivate Mac
    
end

loop each timeout event

    EventManager -> EventManager: poll next timeout

    EventManager -> EventManager: calculate delay between timeout and now

    EventManager -> Mac: handler(delay)
    
    activate Mac
    EventManager <[#blue]-- Mac
    deactivate Mac

end

Mainloop <[#blue]-- EventManager


@enduml
